/** * CommodityClass.js */import React, {Component} from "react";import {Image, StatusBar, StyleSheet, Text, View,FlatList,TouchableOpacity,ScrollView} from "react-native";import {connect} from "react-redux";import {TopToolBar,ACTION_HELP} from '../../components/TopToolBar';import {BottomToolBar, ACTION_BACK,ACTION_DISCOUNT,ACTION_LOGOUT} from '../../components/BottomToolBar';import Icon from 'react-native-vector-icons/FontAwesome';import * as authActions from "../../actions/auth-actions";import * as shoppingActions from '../../actions/shopping-actions';import * as unionActions from "../../actions/union-actions";import strings from "../../resources/strings"import constants from '../../resources/constants';import Button from "../../components/Button";import DeviceInfo from 'react-native-device-info';import { getUniqueId, getManufacturer ,getDeviceId} from 'react-native-device-info';import Accordion from 'react-native-collapsible/Accordion';import {SCREEN_HEIGHT, SCREEN_WIDTH,getTabBarHeight,getHeaderHeight} from "../../utils/tools";import colors from "../../resources/colors";let deviceId = DeviceInfo.getUniqueId();export class CommodityClass extends Component {    constructor(props) {        super(props);        this.state={            activeSections: [],        };    }    componentWillMount() {        this.props.dispatch(shoppingActions.getCommodityClass(this.props.unionId));    }    render() {        const navigator = this.props.navigation;        const data=this.props.classList        return (            <View style={styles.container}>                <TopToolBar title = 'CategorÃ­a' navigation = {this.props.navigation}                            _onLeftIconPress={this._onVolumeIconPress}                            _onRightIconPress={this._onHelpIconPress}/>                <ScrollView style={{flex:1,marginBottom:getTabBarHeight()}}>                    <Accordion                        activeSections={this.state.activeSections}                        sections={data}                        // renderSectionTitle={this._renderSectionTitle}                        renderHeader={this._renderHeader}                        renderContent={this._renderContent}                        onChange={this._updateSections}                    />                </ScrollView>                <BottomToolBar navigation={this.props.navigation}                               leftAction={ACTION_BACK}                               _onLeftIconPress={this._onBackIconPress}                />            </View>        );    }    _renderClassItem(rowData,index){        return(            <TouchableOpacity                onPress={()=>this.selectClass(rowData.taxId)}            >                <View style={{width:SCREEN_WIDTH,alignItems:'center'}}>                    <View style={styles.minClass}>                        <Text style={{fontSize:16}}>{rowData.taxName}</Text>                    </View>                </View>            </TouchableOpacity>        );    }    _renderSectionTitle = section => {        return (            <View style={styles.content}>                <Text>{section.type}</Text>            </View>        );    };    _renderHeader = (section,index) => {        return (            <View style={styles.header}>                {index==this.state.activeSections[0]?                    <Icon name="caret-down" size={30} color='black' />                    :                    <Icon name="caret-right" size={30} color='black' />                }                {/*<Icon name="caret-right" size={30} color='black' />*/}                <Text style={styles.headerText}>{section.type}</Text>            </View>        );    };    _renderContent = section => {        return (            <FlatList                data={section.taxList}                renderItem={({item,index})=>this._renderClassItem(item,index)}            />        );    };    _updateSections = activeSections => {        console.log(activeSections)        this.setState({ activeSections });    };    selectClass(taxId){        this.props.navigation.pop()        this.props.navigation.state.params.refresh();        this.props.dispatch(unionActions.getPriceListByTax(taxId,this.props.unionId,this.props.cartId));    }    _onVolumeIconPress =() =>{};    _onHelpIconPress =() =>{};    _onBackIconPress = () => {        this.props.navigation.pop()    };};const styles = StyleSheet.create({    container: {        flex:1,        alignItems:'center',        justifyContent: 'center'    },    stateWrapper:{        // flex:1,        // alignItems:'center',        // justifyContent: 'center'        // borderWidth:1,        marginTop:SCREEN_HEIGHT*0.01,        width:SCREEN_WIDTH*0.9,        // paddingTop:20,        // alignSelf:"flex-start"    },    stateText:{        fontSize:16,        margin:2,        lineHeight:18,    },    header:{        width:SCREEN_WIDTH,        padding:10,        height:'auto',        flexDirection:'row',        borderBottomWidth:1,        borderColor:colors.primaryGray,        alignItems:'center'    },    headerText:{        fontSize:20,        fontWeight:'bold',        color:colors.baseBlack,        marginLeft:10    },    minClass:{        width:SCREEN_WIDTH*0.95,        padding:8,        height:'auto',        borderTopWidth:0.5,        borderColor:'gray'    }});const mapStateToProps = (state) => ({    auth: state.get('auth'),    unionId:state.get('auth').get('unionId'),    cartId:state.get('auth').get('cartId'),    username:state.get('auth').get('username'),    password:state.get('auth').get('password'),    classList:state.get('shopping').get('classList'),    root: state.get('root'),    union: state.get('union'),});export default connect(mapStateToProps)(CommodityClass)